(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{505:function(a,s,t){"use strict";t.r(s);var r=t(21),e=Object(r.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h3",{attrs:{id:"一-准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一-准备工作"}},[a._v("#")]),a._v(" 一.准备工作")]),a._v(" "),t("h5",{attrs:{id:"_1-将mysql5-6数据库的整个data打包成tar-gz-可以使用如下命令查看"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-将mysql5-6数据库的整个data打包成tar-gz-可以使用如下命令查看"}},[a._v("#")]),a._v(" 1.将MySql5.6数据库的整个Data打包成"),t("code",[a._v("tar.gz")]),a._v("，可以使用如下命令查看")]),a._v(" "),t("div",{staticClass:"language-mysql extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("show global variables like '%datadir%';\n")])])]),a._v(" "),t("h5",{attrs:{id:"_2-可以看到我们的默认位置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-可以看到我们的默认位置"}},[a._v("#")]),a._v(" 2.可以看到我们的默认位置：")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sexileman/picture-bed/blog/image-20220407185745008.png",alt:"image-20220407185745008"}})]),a._v(" "),t("h5",{attrs:{id:"_3-然后去这个目录打包成tar-gz文件-我们这里将打包好的文件放在-usr-local-mysql文件夹下并命名为data-tar-gz-然后通过scp命令推送到我们升级的服务器上去"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-然后去这个目录打包成tar-gz文件-我们这里将打包好的文件放在-usr-local-mysql文件夹下并命名为data-tar-gz-然后通过scp命令推送到我们升级的服务器上去"}},[a._v("#")]),a._v(" 3.然后去这个目录打包成"),t("code",[a._v("tar.gz")]),a._v("文件，我们这里将打包好的文件放在/usr/local/mysql文件夹下并命名为"),t("code",[a._v("data.tar.gz")]),a._v("，然后通过scp命令推送到我们升级的服务器上去")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -zvcf /usr/local/mysql/data.tar.gz /var/lib/mysql\n")])])]),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("scp")]),a._v(" /usr/local/mysql/data.tar.gz ip:/usr/local/mysql\n")])])]),t("h3",{attrs:{id:"二-开始升级"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二-开始升级"}},[a._v("#")]),a._v(" 二.开始升级")]),a._v(" "),t("h5",{attrs:{id:"_1-登录到mysql5-7所在的这台服务器上-先停止已经启动的mysql服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-登录到mysql5-7所在的这台服务器上-先停止已经启动的mysql服务"}},[a._v("#")]),a._v(" 1.登录到MySql5.7所在的这台服务器上，先停止已经启动的mysql服务")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" mysqld stop\n")])])]),t("h5",{attrs:{id:"_2-再找到mysql-5-7-data所在位置-先将-var-lib-mysql整个文件夹备份一下-然后就可以删除掉了"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-再找到mysql-5-7-data所在位置-先将-var-lib-mysql整个文件夹备份一下-然后就可以删除掉了"}},[a._v("#")]),a._v(" 2.再找到MySql 5.7 Data所在位置，先将"),t("code",[a._v("/var/lib/mysql")]),a._v("整个文件夹备份一下，然后就可以删除掉了")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" -rf /var/lib/mysql\n")])])]),t("h5",{attrs:{id:"_3-解压已经拿到的文件-解压后的目录结构如下-将这个文件夹复制到-var-lib下-同时赋予权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-解压已经拿到的文件-解压后的目录结构如下-将这个文件夹复制到-var-lib下-同时赋予权限"}},[a._v("#")]),a._v(" 3.解压已经拿到的文件，解压后的目录结构如下，将这个文件夹复制到"),t("code",[a._v("/var/lib")]),a._v("下,同时赋予权限")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("tar")]),a._v(" -xvf /user/local/mysql/data.tar.gz\n")])])]),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/sexileman/picture-bed/blog/image-20220407191810526.png",alt:"image-20220407191810526"}})]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -r /usr/local/mysql/var/lib/mysql /var/lib\n")])])]),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" -R "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("777")]),a._v(" /var/lib/mysql\n")])])]),t("h5",{attrs:{id:"_4-重启mysql服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-重启mysql服务"}},[a._v("#")]),a._v(" 4.重启mysql服务")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" mysqld start\n")])])]),t("h5",{attrs:{id:"_5-进入到-usr-bin目录下-升级数据库-使用如下命令-需要输入密码-这里root账号的密码是原来5-6版本中的密码-等待执行完成即可"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-进入到-usr-bin目录下-升级数据库-使用如下命令-需要输入密码-这里root账号的密码是原来5-6版本中的密码-等待执行完成即可"}},[a._v("#")]),a._v(" 5.进入到"),t("code",[a._v("/usr/bin")]),a._v("目录下，升级数据库，使用如下命令，需要输入密码，这里root账号的密码是原来5.6版本中的密码，等待执行完成即可")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("mysql_upgrade -uroot -p\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);